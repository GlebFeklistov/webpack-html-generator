<!DOCTYPE html>
<%=
(() => {
  const generator = require('../generator');

  const config = Object.assign({}, {
    options: {},
    files: {}
  }, htmlWebpackPlugin);

  const chunks = Object.values(config.files.chunks || {}).map(item => ({
    script: {
      src: item.entry,
      type: 'text/javascript'
    }
  }));

  const styles = (config.files.css || []).map(item => ({
    link: {
      href: item,
      rel: 'stylesheet'
    }
  }));

  const data = {
    html: {
      lang: config.options.lang,
      manifest: config.options.manifest,
      innerHTML: {
        head: {
          innerHTML: [config.options.head, styles]
        },
        body: {
          innerHTML: [config.options.body, chunks]
        }
      }
    }
  };

  return generator(data);
})()
%>
