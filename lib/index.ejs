<!DOCTYPE html>
<%=
((input) => {
  const generator = require('./generator');
  const options = input ? input.options || {} : {};
  const files = input ? input.files || {} : {};
  const data = {
    html: {
      lang: options.lang,
      manifest: options.manifest,
      dir: options.dir,
      innerHTML: {
        head: {
          innerHTML: [options.head || []]
        },
        body: {
          innerHTML: [options.body || []]
        }
      }
    }
  };

  files && files.css && files.css.map(item => data.html.innerHTML.head.innerHTML.push({
    link: {
      href: item,
      rel: 'stylesheet'
    }
  }));

  files && files.chunks && Object.values(files.chunks).map(item => data.html.innerHTML.body.innerHTML.push({
    script: {
      src: item.entry,
      type: 'text/javascript'
    }
  }));

  return generator(data);
})(htmlWebpackPlugin)
%>
